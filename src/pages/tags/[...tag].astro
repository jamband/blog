---
import NavigationLink from "@/components/NavigationLink.astro";
import PostCollection from "@/components/PostCollection.astro";
import TagLinks from "@/components/TagLinks.astro";
import Layout from "@/layouts/Layout.astro";
import { getPostsByTag, getTags } from "@/utils/api";

export async function getStaticPaths() {
  return getTags().map((tag) => ({
    params: { tag },
  }));
}

const { params } = Astro;
---

<Layout title={`#${params.tag}`}>
  <TagLinks tags={getTags()} class="mb-14" />
  <h1 class="mb-12 flex flex-col items-center justify-center leading-tight">
    <div>Posts</div>
    <div class="text-[1.25rem] text-pink-500">
      <span
        class="before:mr-0.5 before:text-xs before:text-pink-500/80 before:content-['#']"
        >{params.tag}</span
      >
    </div>
  </h1>
  <PostCollection posts={getPostsByTag(params.tag)} class="mb-16" />
  <NavigationLink href="/" class="flex justify-center">← home</NavigationLink>
</Layout>
